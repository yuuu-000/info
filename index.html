<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Device / Browser Info</title>

<style>
    :root {
        --bg: #121212;
        --fg: #e0e0e0;
        --accent: #b8f;
        --card: #1d1d1d;
        --border: #2a2a2a;
    }

    body {
        font-family: "Segoe UI", sans-serif;
        padding: 10px;
        background: var(--bg);
        color: var(--fg);
    }
    h1 {
        text-align: center;
        font-size: 24px;
        margin-bottom: 20px;
        color: var(--accent);
    }
    h2 {
        font-size: 18px;
        margin-top: 30px;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom: 2px solid var(--accent);
    }
    table {
        width: 100%;
        border-collapse: collapse;
        background: var(--card);
        border-radius: 6px;
        overflow: hidden;
        color: var(--fg);
        margin-bottom: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    th, td {
        text-align: left;
        padding: 10px;
        border-bottom: 1px solid var(--border);
        vertical-align: top;
        font-size: 14px;
    }
    th {
        width: 35%;
        font-weight: bold;
        background: #181818;
        color: var(--accent);
    }
    td {
        word-break: break-word;
    }
    tr:last-child td { border-bottom: none; }

    .description {
        display: block;
        font-size: 12px;
        color: #aaa;
        margin-top: 3px;
    }

    /* æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ã¨æŠ˜ã‚Šè¿”ã—è¨­å®š */
    .json-content, .long-data {
        display: block;
        padding: 5px;
        margin-top: 5px;
        background: #0d0d0d;
        border: 1px solid var(--border);
        border-radius: 4px;
        overflow-x: hidden; /* **æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢** */
        word-wrap: break-word;
        white-space: pre-wrap; /* JSONæ•´å½¢ã‚’ç¶­æŒã—ã¤ã¤æŠ˜ã‚Šè¿”ã— */
    }
</style>

</head>
<body>

<h1>Your Device & Browser Full Info</h1>

<div id="tables"></div>

<script>
// ------------------------------------
// é …ç›®ã¨æ—¥æœ¬èªã®èª¬æ˜ã€è¡¨ç¤ºé †åºã‚’å®šç¾© (Networké …ç›®ã‚’è©³ç´°ã«å±•é–‹)
// ------------------------------------
const dataMap = {
    // æ¥ç¶šãƒ»è­˜åˆ¥æƒ…å ±
    "æ¥ç¶šãƒ»æ™‚åˆ»ãƒ»IPæƒ…å ±": [
        { key: "time", desc: "UNIXã€ãƒ­ãƒ¼ã‚«ãƒ«æ™‚åˆ»ã€JSTã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã€æ™‚å·®", type: "object" },
        { key: "Global IP Address", desc: "Webã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰è¦‹ãŸã‚°ãƒ­ãƒ¼ãƒãƒ«IPã‚¢ãƒ‰ãƒ¬ã‚¹", type: "text" },
        { key: "Local IP (WebRTC)", desc: "WebRTCã‚’é€šã˜ã¦å–å¾—ã•ã‚Œã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹LANå†…ã®ãƒ­ãƒ¼ã‚«ãƒ«IPã‚¢ãƒ‰ãƒ¬ã‚¹", type: "text" },
        { key: "Document Referrer", desc: "ã“ã®ãƒšãƒ¼ã‚¸ã«é·ç§»ã™ã‚‹ç›´å‰ã®ãƒšãƒ¼ã‚¸ã®URL (HTTPãƒªãƒ•ã‚¡ãƒ©)", type: "text" },
    ],
    // ãƒ–ãƒ©ã‚¦ã‚¶ãƒ»OSæƒ…å ±
    "ãƒ–ãƒ©ã‚¦ã‚¶ãƒ»OSæƒ…å ±": [
        { key: "User Agent", desc: "ãƒ–ãƒ©ã‚¦ã‚¶ã®è­˜åˆ¥æ–‡å­—åˆ—", type: "text" },
        { key: "UserAgentData (Low)", desc: "ä½ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã®Client Hintsæƒ…å ±ï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ã€OSã€ãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ©ã‚°ï¼‰", type: "object" },
        { key: "UserAgentData (High)", desc: "é«˜ã‚¨ãƒ³ãƒˆãƒ­ãƒ”ãƒ¼ã®Client Hintsæƒ…å ±ï¼ˆCPUã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ãƒ•ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ï¼‰", type: "object" },
        { key: "Platform", desc: "OSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®è­˜åˆ¥å­", type: "text" },
        { key: "Languages", desc: "ãƒ–ãƒ©ã‚¦ã‚¶ã®å„ªå…ˆè¨€èªè¨­å®šãƒªã‚¹ãƒˆ", type: "object" },
        // NOTE: Online Status ã¯ Network è©³ç´°ã¨ã¾ã¨ã‚ã¦ã€Œãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±ã€ã«ç§»å‹•ã™ã‚‹ãŸã‚ã€ã“ã“ã§ã¯å‰Šé™¤
        { key: "Do Not Track", desc: "DNTè¨­å®šãŒæœ‰åŠ¹ã‹ã©ã†ã‹", type: "text" },
        { key: "WebDriver", desc: "è‡ªå‹•ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«(WebDriver)ã®ä½¿ç”¨æ¤œå‡ºãƒ•ãƒ©ã‚°", type: "text" },
    ],
    // ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±
    "ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±": [
        { key: "CPU Cores", desc: "è«–ç†CPUã‚³ã‚¢æ•° (`navigator.hardwareConcurrency`)", type: "text" },
        { key: "Device Memory (GB)", desc: "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ‡ãƒã‚¤ã‚¹ã®ãƒ¡ãƒ¢ãƒªå®¹é‡ã®æ¦‚ç®— (GB)", type: "text" },
        { key: "Screen", desc: "ç‰©ç†ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã¨åˆ©ç”¨å¯èƒ½é ˜åŸŸã®è§£åƒåº¦", type: "object" },
        { key: "Window", desc: "ãƒ–ãƒ©ã‚¦ã‚¶ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å†…éƒ¨/å¤–éƒ¨ã‚µã‚¤ã‚ºï¼ˆãƒ”ã‚¯ã‚»ãƒ«ï¼‰", type: "object" },
        { key: "Pixel Ratio", desc: "CSSãƒ”ã‚¯ã‚»ãƒ«ã«å¯¾ã™ã‚‹ç‰©ç†ãƒ”ã‚¯ã‚»ãƒ«ã®æ¯”ç‡ (DPI)", type: "text" },
        { key: "Orientation", desc: "ç”»é¢ã®å‘ã (ä¾‹: landscape-primary)", type: "text" },
        { key: "Max Touch Points", desc: "åŒæ™‚ã«ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹æœ€å¤§ã‚¿ãƒƒãƒç‚¹æ•°", type: "text" },
        // Network Information APIã®è©³ç´°é …ç›®ã‚’ã“ã“ã«å±•é–‹
        { key: "Network Type", desc: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã®ç‰©ç†çš„ã‚¿ã‚¤ãƒ— (ä¾‹: wifi, cellular)", type: "text" },
        { key: "Effective Type", desc: "å®ŸåŠ¹çš„ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç¨®åˆ¥ (ä¾‹: 4g, 3g)", type: "text" },
        { key: "Downlink", desc: "æ¨å®šã•ã‚Œã‚‹ä¸‹ã‚Šå›ç·šé€Ÿåº¦ (Mbps)", type: "text" },
        { key: "Round-Trip Time (RTT)", desc: "æ¨å®šã•ã‚Œã‚‹å¾€å¾©æ™‚é–“ (ms)", type: "text" },
        { key: "Save Data Mode", desc: "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ¼ãƒãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹/ç„¡åŠ¹", type: "text" },
        { key: "Online Status", desc: "ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šçŠ¶æ…‹", type: "text" },
        // NOTE: å…ƒã® { key: "Network", desc: "...", type: "object" } ã¯å‰Šé™¤
    ],
    // ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆé–¢é€£
    "ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ": [
        { key: "Canvas Fingerprint", desc: "Canvas APIã‚’ç”¨ã„ãŸãƒ–ãƒ©ã‚¦ã‚¶å›ºæœ‰ã®ç”»åƒãƒãƒƒã‚·ãƒ¥", type: "long-data" },
        { key: "Audio Fingerprint", desc: "Web Audio APIã‚’ç”¨ã„ãŸãƒ‡ãƒã‚¤ã‚¹å›ºæœ‰ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ‡ãƒ¼ã‚¿", type: "long-data" },
        { key: "WebGL", desc: "WebGLãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼æƒ…å ± (ãƒ™ãƒ³ãƒ€ãƒ¼ã€ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³)", type: "object" },
        { key: "WebGPU", desc: "WebGPUã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æƒ…å ± (åå‰ã€ã‚µãƒãƒ¼ãƒˆæ©Ÿèƒ½)", type: "object" },
        { key: "Fonts", desc: "ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ç‰¹å®šã®ãƒ•ã‚©ãƒ³ãƒˆãƒªã‚¹ãƒˆ", type: "text" },
    ],
    // ã‚»ãƒ³ã‚µãƒ¼ãƒ»APIãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
    "ã‚»ãƒ³ã‚µãƒ¼ãƒ»APIãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸": [
        { key: "Permissions", desc: "ä¸»è¦ãªAPIï¼ˆGPSã€ãƒã‚¤ã‚¯ã€ã‚«ãƒ¡ãƒ©ãªã©ï¼‰ã®æ¨©é™çŠ¶æ…‹", type: "object" },
        { key: "GPS", desc: "åœ°ç†ä½ç½®æƒ…å ±ï¼ˆç·¯åº¦ã€çµŒåº¦ã€ç²¾åº¦ï¼‰ã®å–å¾—çµæœ", type: "object" },
        { key: "Media Devices", desc: "åˆ©ç”¨å¯èƒ½ãªã‚ªãƒ¼ãƒ‡ã‚£ã‚ª/ãƒ“ãƒ‡ã‚ªå…¥å‡ºåŠ›ãƒ‡ãƒã‚¤ã‚¹ã®æ•°", type: "object" },
        { key: "Battery", desc: "ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡ã€å……é›»çŠ¶æ…‹", type: "object" },
        { key: "Storage", desc: "æ¨å®šã•ã‚Œã‚‹åˆ©ç”¨å¯èƒ½/åˆ©ç”¨æ¸ˆã¿ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ (MB)", type: "object" },
        { key: "API Support", desc: "Web Bluetooth, USB, NFC, Serialãªã©ã®æœ€æ–°APIã‚µãƒãƒ¼ãƒˆçŠ¶æ³", type: "object" },
    ],
    // Navigator Full Dump
    "Navigator Full Dump": [
        { key: "Navigator Full Dump", desc: "navigatorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å…¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ€ãƒ³ãƒ— (ãƒ‡ãƒãƒƒã‚°ç”¨)", type: "object" },
    ]
};

// ------------------------------------
// è¡¨è¿½åŠ é–¢æ•°
// ------------------------------------
function add(key, value, desc, type) {
    const container = document.getElementById("tables");
    const table = document.createElement("table");

    const tr = document.createElement("tr");
    const th = document.createElement("th");
    th.innerHTML = `${key}<span class="description">${desc}</span>`;
    const td = document.createElement("td");

    if (type === "long-data") {
        // ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆã‚„éå¸¸ã«é•·ã„æ–‡å­—åˆ— (æ°´å¹³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ã§æŠ˜ã‚Šè¿”ã—)
        const div = document.createElement("div");
        div.className = "long-data";
        div.textContent = value;
        td.appendChild(div);
    } else if (type === "object" && typeof value === "object" && value !== null && !Array.isArray(value)) {
        // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (æ°´å¹³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ã§æŠ˜ã‚Šè¿”ã—)
        const json = document.createElement("div");
        json.className = "json-content";
        json.textContent = JSON.stringify(value, null, 2);
        td.appendChild(json);
    } else if (Array.isArray(value)) {
        // é…åˆ— (Languagesãªã©)
        td.textContent = value.join(', ');
    } else {
        // é€šå¸¸ãƒ†ã‚­ã‚¹ãƒˆ
        td.textContent = value;
    }

    tr.appendChild(th);
    tr.appendChild(td);
    table.appendChild(tr);

    container.appendChild(table);
}

// ------------------------------------
// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾—é–¢æ•°ç¾¤
// ------------------------------------

// æ™‚åˆ»æƒ…å ± (localã¨JSTã‚’åˆ†é›¢ã—ã¦å…ƒã®å½¢å¼ã§å–å¾—)
function getTimeInfo(){
    const d = new Date();
    const pad = n => String(n).padStart(2,"0");
    const ms = String(d.getMilliseconds()).padStart(3,"0");
    const wd = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][d.getDay()];

    // Local Time
    const local = `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${wd} ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}.${ms}`;
    const unix = (d.getTime()/1000).toFixed(3);
    const offsetMin = d.getTimezoneOffset();
    const offsetHour = -(offsetMin/60);
    const offsetStr = (offsetHour>=0?"UTC+":"UTC")+offsetHour;
    const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

    // JST Time (å…ƒã®å½¢å¼ã«è¿‘ã¥ã‘ã‚‹)
    const jstObj = new Date(d.toLocaleString("en-US",{timeZone:"Asia/Tokyo"}));
    const jms = String(d.getMilliseconds()).padStart(3,"0");
    // JSTã®æ›œæ—¥ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«JSTã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨
    const jstWd = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][jstObj.getDay()];
    // JSTã®æ™‚åˆ»ã¯toLocaleStringã§å–å¾—ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æ§‹ç¯‰
    const jst = `${jstObj.getFullYear()}-${pad(jstObj.getMonth()+1)}-${pad(jstObj.getDate())} ${jstWd} ${pad(jstObj.getHours())}:${pad(jstObj.getMinutes())}:${pad(jstObj.getSeconds())}.${jms}`;

    return {
        // ä»¥å‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§çµ±åˆã‚’ç¶­æŒã—ãŸå½¢å¼
        localTime: {
            "UnixTimestamp": unix,
            "Local": local,
            "JST": jst,
            "TimeZone": timezone,
            "OffsetHours": offsetStr
        }
    };
}


// Global IP
async function getGlobalIP() {
    try {
        const response = await fetch("https://api.ipify.org?format=json");
        const data = await response.json();
        return data.ip;
    }
    catch { return "å–å¾—å¤±æ•—/CORSãƒ–ãƒ­ãƒƒã‚¯"; }
}

// Local IP (WebRTC)
async function getLocalIP() {
    return new Promise(resolve => {
        try {
            const ipSet = new Set();
            const pc = new RTCPeerConnection({ iceServers: [{urls: "stun:stun.l.google.com:19302"}] });
            pc.createDataChannel("");
            pc.createOffer().then(o => pc.setLocalDescription(o));
            pc.onicecandidate = e => {
                if (!e.candidate) {
                    resolve([...ipSet].join(', ') || "æ¤œå‡ºãªã—");
                    return;
                }
                // ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const m = /(10\.\d{1,3}\.\d{1,3}\.\d{1,3}|172\.(1[6-9]|2\d|3[0-1])\.\d{1,3}\.\d{1,3}|192\.168\.\d{1,3}\.\d{1,3})/.exec(e.candidate.candidate);
                if (m) ipSet.add(m[1]);
            };
            // ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‡¦ç†
            setTimeout(() => {
                pc.close();
                resolve([...ipSet].join(', ') || "æ¤œå‡ºãªã— (ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ)");
            }, 1000);
        } catch { resolve("éå¯¾å¿œ/ã‚¨ãƒ©ãƒ¼"); }
    });
}

// UA-CH High Entropy
async function getUAHigh() {
    try {
        if (!navigator.userAgentData || !navigator.userAgentData.getHighEntropyValues) return "éå¯¾å¿œ";
        const hints = ["architecture","model","platformVersion","uaFullVersion","bitness","fullVersionList","formFactor"];
        return await navigator.userAgentData.getHighEntropyValues(hints);
    } catch { return "éå¯¾å¿œ/æ¨©é™ä¸è¶³"; }
}

// WebGL
function getWebGL() {
    try {
        const c = document.createElement("canvas");
        const gl = c.getContext("webgl") || c.getContext("experimental-webgl");
        if (!gl) return "éå¯¾å¿œ";
        return {
            Vendor: gl.getParameter(gl.VENDOR),
            Renderer: gl.getParameter(gl.RENDERER),
            Version: gl.getParameter(gl.VERSION)
        };
    } catch { return "å–å¾—å¤±æ•—"; }
}

// WebGPU
async function getWebGPU() {
    try {
        if (!navigator.gpu) return "éå¯¾å¿œ";
        const ad = await navigator.gpu.requestAdapter();
        return {
            name: ad.name,
            features: [...ad.features]
        };
    } catch { return "å–å¾—å¤±æ•—/éå¯¾å¿œ"; }
}

// Canvas Fingerprint
function canvasFP() {
    try {
        const c = document.createElement("canvas");
        c.width = 300; c.height = 60;
        const ctx = c.getContext("2d");
        ctx.textBaseline = "alphabetic";
        ctx.fillStyle = "#f60";
        ctx.fillRect(125,1,62,20);
        ctx.fillStyle = "#069";
        ctx.font = "18px Arial";
        ctx.fillText("canvas-fp-test (GM)", 2, 40);
        return c.toDataURL();
    } catch { return "éå¯¾å¿œ"; }
}

// Audio Fingerprint
async function getAudioFP() {
    try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const analyser = ctx.createAnalyser();
        const gain = ctx.createGain();

        analyser.fftSize = 2048;
        gain.gain.value = 0;

        osc.frequency.value = 10000;
        osc.type = "triangle";
        osc.connect(analyser).connect(gain).connect(ctx.destination);

        const freq = new Float32Array(analyser.frequencyBinCount);

        osc.start();
        await new Promise(r => setTimeout(r, 500));
        analyser.getFloatFrequencyData(freq);
        osc.stop();
        await ctx.close();

        const dataStr = freq.slice(0, 10).map(v => v.toFixed(4)).join(',');
        return `SampleRate:${ctx.sampleRate}, Data:[${dataStr}]`;
    } catch { return "éå¯¾å¿œ/ã‚¨ãƒ©ãƒ¼"; }
}

// Fonts
function detectFonts() {
    const fonts = ["Arial","Verdana","Times New Roman","Courier New","Georgia","Comic Sans MS","Impact","Trebuchet MS","Helvetica","Calibri","MS Gothic","Meiryo","Noto Sans CJK JP"];
    const base = ["serif","sans-serif","monospace"];
    const c = document.createElement("canvas");
    const ctx = c.getContext("2d");
    const txt = "mmmmmmmmmwwwwwww";
    const size = "72px";

    const baseW = {};
    base.forEach(f => { ctx.font = `${size} ${f}`; baseW[f] = ctx.measureText(txt).width; });

    const detected = [];
    for (const f of fonts) {
        for (const b of base) {
            ctx.font = `${size} '${f}',${b}`;
            if (ctx.measureText(txt).width !== baseW[b] && !detected.includes(f)) {
                detected.push(f);
            }
        }
    }
    return detected.join(', ') || "æ¤œå‡ºãªã—";
}

// Battery
async function getBattery() {
    try {
        if (!navigator.getBattery) return "éå¯¾å¿œ";
        const b = await navigator.getBattery();
        return {
            Level: Math.round(b.level * 100) + "%",
            Charging: b.charging ? "Yes" : "No",
            ChargingTime: b.chargingTime === Infinity ? "Infinity" : `${b.chargingTime}ç§’`,
            DischargingTime: b.dischargingTime === Infinity ? "Infinity" : `${b.dischargingTime}ç§’`
        };
    } catch { return "éå¯¾å¿œ/æ¨©é™ã‚¨ãƒ©ãƒ¼"; }
}

// Storage
async function getStorage() {
    try {
        if (!navigator.storage || !navigator.storage.estimate) return "éå¯¾å¿œ";
        const estimate = await navigator.storage.estimate();
        const formatBytes = (bytes) => (bytes / 1024 / 1024).toFixed(2) + "MB";

        return {
            Usage: formatBytes(estimate.usage),
            Quota: formatBytes(estimate.quota)
        };
    }
    catch { return "éå¯¾å¿œ/ã‚¨ãƒ©ãƒ¼"; }
}

// Permissions
async function getPermissions() {
    const list = ["geolocation","notifications","microphone","camera","clipboard-read","clipboard-write"];
    const result = {};
    for (const p of list) {
        try {
            result[p] = (await navigator.permissions.query({name:p})).state;
        }
        catch {
            result[p] = "éå¯¾å¿œ/ã‚¨ãƒ©ãƒ¼";
        }
    }
    return result;
}

// GPS
async function getGPS() {
    if (!navigator.geolocation) return "éå¯¾å¿œ";
    return new Promise(resolve => {
        navigator.geolocation.getCurrentPosition(
            pos => resolve({
                Latitude: pos.coords.latitude.toFixed(6),
                Longitude: pos.coords.longitude.toFixed(6),
                Accuracy: `${pos.coords.accuracy}m`
            }),
            err => resolve({ Error: `ã‚³ãƒ¼ãƒ‰ ${err.code}`, Message: err.message }),
            { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
        );
    });
}

// Media Devices
async function getMediaDevices() {
    try {
        if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) return "éå¯¾å¿œ";
        const devices = await navigator.mediaDevices.enumerateDevices();
        const counts = devices.reduce((acc, dev) => {
            acc[dev.kind] = (acc[dev.kind] || 0) + 1;
            return acc;
        }, {});

        return {
            AudioInput_ãƒã‚¤ã‚¯: counts["audioinput"] || 0,
            AudioOutput_ã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼: counts["audiooutput"] || 0,
            VideoInput_ã‚«ãƒ¡ãƒ©: counts["videoinput"] || 0,
            TotalDevices: devices.length
        };
    }
    catch (e) {
        return "éå¯¾å¿œ/æ¨©é™ä¸è¶³ (enumerateDevices)";
    }
}

// Navigator Full Dump
async function getNavigatorFull() {
    const out = {};
    for (const k in navigator) {
        try { out[k] = typeof navigator[k] === "function" ? `function() [${k}]` : navigator[k]; }
        catch { out[k] = "å–å¾—ä¸å¯"; }
    }
    return out;
}

// ------------------------------------
// ãƒ¡ã‚¤ãƒ³å‡¦ç†
// ------------------------------------
async function start() {
    const dynamicData = {};
    const time = getTimeInfo();
    const network = navigator.connection; // Network Information API

    // ãƒ‡ãƒ¼ã‚¿ã®åé›†
    // æ™‚åˆ»æƒ…å ± (JSTçµ±åˆã‚’ç¶­æŒ)
    dynamicData["time"] = time.localTime;

    dynamicData["Global IP Address"] = await getGlobalIP();
    dynamicData["Local IP (WebRTC)"] = await getLocalIP();
    dynamicData["Document Referrer"] = document.referrer || "ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹";

    dynamicData["User Agent"] = navigator.userAgent;
    dynamicData["UserAgentData (Low)"] = navigator.userAgentData || "éå¯¾å¿œ";
    dynamicData["UserAgentData (High)"] = await getUAHigh();
    dynamicData["Platform"] = navigator.platform;
    dynamicData["Languages"] = navigator.languages;
    dynamicData["Do Not Track"] = navigator.doNotTrack || "è¨­å®šãªã—/éå¯¾å¿œ";
    dynamicData["WebDriver"] = navigator.webdriver ? "âœ” True (è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ä¸­)" : "âŒ False";
    dynamicData["CPU Cores"] = navigator.hardwareConcurrency || "éå¯¾å¿œ";
    dynamicData["Device Memory (GB)"] = navigator.deviceMemory || "éå¯¾å¿œ";
    dynamicData["Screen"] = { width: screen.width, height: screen.height, availWidth: screen.availWidth, availHeight: screen.availHeight, pixelDepth: screen.pixelDepth };
    dynamicData["Window"] = { inner: [innerWidth, innerHeight], outer: [outerWidth, outerHeight] };
    dynamicData["Pixel Ratio"] = devicePixelRatio;
    dynamicData["Orientation"] = screen.orientation?.type || "éå¯¾å¿œ";
    dynamicData["Max Touch Points"] = navigator.maxTouchPoints;

    // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è©³ç´°æƒ…å ±ã®å–å¾—ã¨åˆ†è§£ (ä¿®æ­£/å¼·åŒ–éƒ¨åˆ†)
    dynamicData["Online Status"] = navigator.onLine ? "âœ” True" : "âŒ False";
    if (network) {
        dynamicData["Network Type"] = network.type || "unknown";
        dynamicData["Effective Type"] = network.effectiveType || "unknown";
        dynamicData["Downlink"] = network.downlink !== undefined ? `${network.downlink} Mbps` : "éå¯¾å¿œ";
        dynamicData["Round-Trip Time (RTT)"] = network.rtt !== undefined ? `${network.rtt} ms` : "éå¯¾å¿œ";
        dynamicData["Save Data Mode"] = network.saveData ? "âœ” True" : "âŒ False";
    } else {
        dynamicData["Network Type"] = "éå¯¾å¿œ (Network Information API)";
        dynamicData["Effective Type"] = "éå¯¾å¿œ (Network Information API)";
        dynamicData["Downlink"] = "éå¯¾å¿œ (Network Information API)";
        dynamicData["Round-Trip Time (RTT)"] = "éå¯¾å¿œ (Network Information API)";
        dynamicData["Save Data Mode"] = "éå¯¾å¿œ (Network Information API)";
    }

    // ä»–ã®ãƒ‡ãƒ¼ã‚¿
    dynamicData["Canvas Fingerprint"] = canvasFP();
    dynamicData["Audio Fingerprint"] = await getAudioFP();
    dynamicData["WebGL"] = getWebGL();
    dynamicData["WebGPU"] = await getWebGPU();
    dynamicData["Fonts"] = detectFonts();
    dynamicData["Permissions"] = await getPermissions();
    dynamicData["GPS"] = await getGPS();
    dynamicData["Media Devices"] = await getMediaDevices();
    dynamicData["Battery"] = await getBattery();
    dynamicData["Storage"] = await getStorage();
    dynamicData["API Support"] = {
        Bluetooth: !!navigator.bluetooth, USB: !!navigator.usb, NFC: "NDEFReader" in window,
        HID: !!navigator.hid, Serial: !!navigator.serial, Share: !!navigator.share,
        Clipboard: !!navigator.clipboard, ServiceWorker: !!navigator.serviceWorker,
        WebRTC: !!window.RTCPeerConnection
    };
    dynamicData["Navigator Full Dump"] = await getNavigatorFull();


    // ç”»é¢ã«è¡¨ç¤º
    const container = document.getElementById("tables");
    for (const section in dataMap) {
        const h2 = document.createElement("h2");
        h2.textContent = `ğŸ”¹ ${section}`; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæä¾›ã—ãŸ h2.textContent ã®å½¢å¼ã‚’å®Œå…¨ã«ç¶­æŒ
        container.appendChild(h2);

        dataMap[section].forEach(item => {

            // Network Information APIã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±ã«çµ±åˆã—ã¦è¡¨ç¤ºã™ã‚‹
            const isNetworkDetailKey = ["Network Type", "Effective Type", "Downlink", "Round-Trip Time (RTT)", "Save Data Mode", "Online Status"].includes(item.key);

            // ä»¥ä¸‹ã®ã‚­ãƒ¼ã¯ã€ä»–ã®å ´æ‰€ã¸ç§»å‹•ãƒ»å±•é–‹ã—ãŸãŸã‚ã€ã“ã“ã§ã¯ã‚¹ã‚­ãƒƒãƒ—
            if (item.key === "Network" || item.key === "Online") {
                return;
            }

            // Network Detail ã®ã‚­ãƒ¼ãŒã€Œãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ã‚‹å ´åˆã€è¡¨ç¤º
            if (section === "ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±" && isNetworkDetailKey) {
                 add(item.key, dynamicData[item.key], item.desc, item.type);
                 return;
            } else if (section !== "ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ»ç”»é¢æƒ…å ±" && isNetworkDetailKey) {
                 // ä»–ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« Network Detail ã‚­ãƒ¼ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆï¼ˆé€šå¸¸èµ·ã“ã‚‰ãªã„ãŒå¿µã®ãŸã‚ï¼‰ã€ã‚¹ã‚­ãƒƒãƒ—
                 return;
            }

            // ãã‚Œä»¥å¤–ã®é€šå¸¸ã®é …ç›®ã‚’è¡¨ç¤º
            const value = dynamicData[item.key];
            add(item.key, value, item.desc, item.type);
        });
    }
}

start();
</script>

</body>
</html>
